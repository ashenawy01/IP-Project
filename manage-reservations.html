<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Manage Reservations</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="Images/png" href="assets/images/logo.png">
</head>

<body>
  <div class="dashboard">
    <aside class="sidebar">
      <div class="sidebar-logo">
        <img src="assets/images/logo.png" alt="Logo">
      </div>
      <ul>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li class="itemActive"><a href="manage-reservations.html">Reservations</a></li>
        <li><a href="manage-users.html">Users</a></li>
        <li><a href="manage-managers.html">Managers</a></li>
        <li><a href="manage-transactions.html">Transactions</a></li>
      </ul>
      <div class="sidebar-logout">
        <a href="login.html">Logout</a>
      </div>
    </aside>
    <main class="main-content">
      <h1>Manage Reservations</h1>
      <!DOCTYPE html>
      <html lang="en">

      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Job Cards</title>
        <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.0.7/css/boxicons.min.css" />
        <style>

        </style>
      </head>

      <body>

        <div class="container mt-5 mb-3">
          <div class="row">
            <!-- Card 1 -->
            <div class="col-md-3">
              <div class="card p-3 mb-2">
                <div class="d-flex justify-content-between">
                  <div class="d-flex flex-row align-items-center">
                    <div class="icon"> <i class="bx bxl-mailchimp"></i> </div>
                    <div class="ms-2 c-details">
                      <h6 class="mb-0">System Design</h6> <span>6 day ago</span>
                    </div>
                  </div>
                  <div class="badge"> <span>Development</span> </div>
                </div>
                <div class="mt-5">
                  <h3 class="heading">System Analyzing and Development</h3>
                  <div class="mt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" style="width: 64%" aria-valuenow="32"
                        aria-valuemin="0" aria-valuemax="50"></div>
                    </div>
                    <div class="mt-3"> <span class="text1">32 Applied <span class="text2">of 50 capacity</span></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Card 2 -->
            <div class="col-md-3">
              <div class="card p-3 mb-2">
                <div class="d-flex justify-content-between">
                  <div class="d-flex flex-row align-items-center">
                    <div class="icon"> <i class="bx bxl-dribbble"></i> </div>
                    <div class="ms-2 c-details">
                      <h6 class="mb-0">Intro to Web Dev</h6> <span>2 weeks ago</span>
                    </div>
                  </div>
                  <div class="badge"> <span>Web</span> </div>
                </div>
                <div class="mt-5">
                  <h3 class="heading">Principles of Web Design Development</h3>
                  <div class="mt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" style="width: 60%" aria-valuenow="42"
                        aria-valuemin="0" aria-valuemax="70"></div>
                    </div>
                    <div class="mt-3"> <span class="text1">42 Applied <span class="text2">of 70 capacity</span></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Card 3 -->
            <div class="col-md-3">
              <div class="card p-3 mb-2">
                <div class="d-flex justify-content-between">
                  <div class="d-flex flex-row align-items-center">
                    <div class="icon"> <i class="bx bxl-mailchimp"></i> </div>
                    <div class="ms-2 c-details">
                      <h6 class="mb-0">Embedded Systems </h6> <span>1 Month</span>
                    </div>
                  </div>
                  <div class="badge"> <span>Development</span> </div>
                </div>
                <div class="mt-5">
                  <h3 class="heading">Senior Product Designer-Singapore</h3>
                  <div class="mt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" style="width: 64%" aria-valuenow="32"
                        aria-valuemin="0" aria-valuemax="50"></div>
                    </div>
                    <div class="mt-3"> <span class="text1">32 Applied <span class="text2">of 50 capacity</span></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Card 4-->
            <div class="col-md-3">
              <div class="card p-3 mb-2">
                <div class="d-flex justify-content-between">
                  <div class="d-flex flex-row align-items-center">
                    <div class="icon"> <i class="bx bxl-mailchimp"></i> </div>
                    <div class="ms-2 c-details">
                      <h6 class="mb-0">Photoshop</h6> <span>1 day ago</span>
                    </div>
                  </div>
                  <div class="badge"> <span>Design</span> </div>
                </div>
                <div class="mt-5">
                  <h3 class="heading">Mastring photoshop pro Designing</h3>
                  <div class="mt-5">
                    <div class="progress">
                      <div class="progress-bar" role="progressbar" style="width: 64%" aria-valuenow="32"
                        aria-valuemin="0" aria-valuemax="50"></div>
                    </div>
                    <div class="mt-3"> <span class="text1">32 Applied <span class="text2">of 100 capacity</span></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>



        <!DOCTYPE html>
        <html lang="en">

        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>Project Management</title>
          <style>
            body {
              font-family: Arial, sans-serif;
            }

            table {
              width: 100%;
              border-collapse: collapse;
            }

            th,
            td {
              border: 1px solid #ddd;
              padding: 8px;
              text-align: left;
            }

            th {
              background-color: #f2f2f2;
            }

            .btn {
              padding: 5px 10px;
              border: none;
              border-radius: 5px;
              cursor: pointer;
              background-color: #2ecc71;
            }

            .btn-update {
              background-color: #3498db;
              color: white;
            }

            .btn-delete {
              background-color: #e74c3c;
              color: white;
            }

            .btn-add {
              background-color: #2ecc71;
              color: white;
              margin-bottom: 10px;
            }

            .search-container {
              text-align: right;
              margin-bottom: 10px;
            }

            .search-input {
              padding: 5px;
              margin-right: 5px;
              border: 1px solid #ddd;
              border-radius: 5px;
            }

            /* Add styles for the modal */
            .modal {
              display: none;
              position: fixed;
              z-index: 1;
              left: 0;
              top: 0;
              width: 100%;
              height: 100%;
              overflow: auto;
              background-color: rgb(0, 0, 0);
              background-color: rgba(0, 0, 0, 0.4);
              padding-top: 60px;
            }

            /* Modal Content/Box */
            .modal-content {
              background-color: #fefefe;
              margin: 5% auto;
              padding: 20px;
              border: 1px solid #888;
              width: 80%;/
            }

            /* The Close Button */
            .close {
              color: #aaa;
              float: right;
              font-size: 28px;
              font-weight: bold;
            }

            .close:hover,
            .close:focus {
              color: black;
              text-decoration: none;
              cursor: pointer;
            }
          </style>
        </head>

        <body>

          <!-- The Search Bar -->
          <div class="search-container">
            <input type="text" id="search-input" class="search-input" placeholder="Write here...">
            <button onclick="searchTable()" class="btn">Search</button>
          </div>


          <button id="myBtn" onclick="openAddProjectWindow()" class="btn btn-add">Add Reservation</button>

          <!-- The Modal -->
          <table id="projects-table">
            <tr>
              <th>ID</th>
              <th>Course Title</th>
              <th>Start Date</th>
              <th>Student Name</th>
              <th>Phone Number</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </table>


          <!-- The Modal for Adding Reservation -->
<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <h2>Add Reservation</h2>
    <form id="addProjectForm">
      <label for="courseId">Course ID:</label><br>
      <input type="text" id="courseId" name="courseId" required><br>
      <label for="studentId">Student ID:</label><br>
      <input type="text" id="studentId" name="studentId" required><br>
      <label for="startDate">Start Date:</label><br>
      <input type="date" id="startDate" name="startDate" required><br>
      <label for="status">Status:</label><br>
      <select name="status" id="status" required>
        <option value="">Select status</option>
        <option value="pending">Pending</option>
        <option value="Completed">Completed</option>
        <option value="Declined">Declined</option>
        <option value="Canceled">Canceled</option>
      </select><br><br>
      <label for="note">Note:</label><br>
      <textarea id="note" name="note" required></textarea><br>
      <input type="button" onclick="saveReservation()" class="btn" value="Save">
    </form>
  </div>
</div>

          </div>




          <!-- The Modal for Updating Project -->
          <div id="updateModal" class="modal">
            <div class="modal-content">
              <span class="close" onclick="closeUpdateModal()">&times;</span>
              <h2>Update Project</h2>
              <form id="updateProjectForm">
                <input type="hidden" id="update-id" name="id">
                <label for="update-title">Title:</label><br>
                <input type="text" id="update-title" name="title" required><br>
                <input type="button" onclick="saveUpdatedProject()" class="btn" value="Save Changes">
              </form>
            </div>
          </div>


          <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

          <script>

            function openAddProjectWindow() {
              const myModal = document.getElementById('myModal');
              myModal.style.display = 'block';
            }

            // Function to save reservation
            function saveReservation() {
    console.log("there");
    // Get form data
    var courseId = document.getElementById("courseId").value;
    var studentId = document.getElementById("studentId").value;
    var startDate = document.getElementById("startDate").value;
    var status = document.getElementById("status").value;
    var note = document.getElementById("note").value; // Add note variable

    // Create data object
    var data = {
        course_id: courseId, // Match variable name with backend
        student_id: studentId, // Match variable name with backend
        date: startDate,
        status: status,
        note: note // Add note variable
    };

    // Send POST request
    $.ajax({
        url: "http://localhost/reservationapp/backend/reservation-controller.php",
        type: "POST",
        data: JSON.stringify(data),
        success: function (response) {
            // Handle success
            alert("Reservation saved successfully.");
            closeModal(); // Close modal after successful submission
        },
        error: function (xhr, status, error) {
            // Handle error
            alert("Error saving reservation: " + error);
        }
    });
}


            function updateProject(btn) {
              var row = btn.parentNode.parentNode;
              var newTitle = prompt("Update Course Title:", row.cells[1].innerText);
              if (newTitle !== null) {
                row.cells[1].innerText = newTitle;
              }
            }

            function deleteProject(btn) {
              if (confirm("Are you sure you want to delete this reservation?")) {
                var row = btn.parentNode.parentNode;
                row.parentNode.removeChild(row);
              }
            }

            function searchTable() {
              var input = document.getElementById("search-input");
              var filter = input.value.toUpperCase();
              var table = document.getElementById("projects-table");
              var tr = table.getElementsByTagName("tr");

              for (var i = 0; i < tr.length; i++) {
                var td = tr[i].getElementsByTagName("td")[1];
                if (td) {
                  var txtValue = td.textContent || td.innerText;
                  if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                  } else {
                    tr[i].style.display = "none";
                  }
                }
              }
            }




          </script>

        </body>

        </html>







        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
        <script
          src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.bundle.min.js"></script>
      </body>

      </html>

    </main>
  </div>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="script.js"></script>
</body>

</html>